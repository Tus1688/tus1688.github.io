"use strict";(self.webpackChunktus_1688_github_io=self.webpackChunktus_1688_github_io||[]).push([[457],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>f});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=o.createContext({}),p=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return o.createElement(l.Provider,{value:t},e.children)},s="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),s=p(n),m=r,f=s["".concat(l,".").concat(m)]||s[m]||d[m]||a;return n?o.createElement(f,i(i({ref:t},u),{},{components:n})):o.createElement(f,i({ref:t},u))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=m;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c[s]="string"==typeof e?e:r,i[1]=c;for(var p=2;p<a;p++)i[p]=n[p];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},9481:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>s,frontMatter:()=>a,metadata:()=>c,toc:()=>p});var o=n(7462),r=(n(7294),n(3905));const a={sidebar_position:2,description:"How to automate the deployment of a react app with Docker",tags:["react","nginx","web development","docker"]},i=void 0,c={unversionedId:"Web Development/Dockerize React with Nginx",id:"Web Development/Dockerize React with Nginx",title:"Dockerize React with Nginx",description:"How to automate the deployment of a react app with Docker",source:"@site/docs/Web Development/Dockerize React with Nginx.md",sourceDirName:"Web Development",slug:"/Web Development/Dockerize React with Nginx",permalink:"/docs/Web Development/Dockerize React with Nginx",draft:!1,tags:[{label:"react",permalink:"/docs/tags/react"},{label:"nginx",permalink:"/docs/tags/nginx"},{label:"web development",permalink:"/docs/tags/web-development"},{label:"docker",permalink:"/docs/tags/docker"}],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,description:"How to automate the deployment of a react app with Docker",tags:["react","nginx","web development","docker"]},sidebar:"tutorialSidebar",previous:{title:"React Nginx Config",permalink:"/docs/Web Development/React Nginx Config"},next:{title:"Dockerize Go REST API",permalink:"/docs/Web Development/Dockerize Go REST API"}},l={},p=[{value:"Why we use Docker on react?",id:"why-we-use-docker-on-react",level:3},{value:"Dockerfile",id:"dockerfile",level:3},{value:"Explanation",id:"explanation",level:3}],u={toc:p};function s(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,o.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"In the previous article, we have learned how to deploy a react app with nginx.\nBut we have to do it manually. So I will show you how to automate the deployment\nof a react app with Docker."),(0,r.kt)("admonition",{title:"Important Note",type:"danger"},(0,r.kt)("p",{parentName:"admonition"},"Docker run as root by default. So you need to be careful when using Docker.")),(0,r.kt)("h3",{id:"why-we-use-docker-on-react"},"Why we use Docker on react?"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Containerization is the future of software development"),(0,r.kt)("li",{parentName:"ul"},"Docker is the most popular containerization tool"),(0,r.kt)("li",{parentName:"ul"},"Docker documentation is very good")),(0,r.kt)("h3",{id:"dockerfile"},"Dockerfile"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'FROM node:alpine AS builder\n\nWORKDIR /app\nCOPY package.json yarn.lock ./\nRUN yarn\nCOPY . ./\nENV GENERATE_SOURCEMAP=false\nRUN yarn build\n\nFROM nginx:alpine\nCOPY --from=builder /app/build /usr/share/nginx/html\nRUN rm /etc/nginx/conf.d/default.conf\nCOPY nginx.conf /etc/nginx/conf.d\nEXPOSE 80\n\nCMD ["nginx", "-g", "daemon off;"]\n')),(0,r.kt)("h3",{id:"explanation"},"Explanation"),(0,r.kt)("p",null,"So we use two stages in our Dockerfile. The first stage is the builder stage.\nWe use the node image as a base image. Then we copy the package.json and yarn.lock\nfile to the container. Then we install the dependencies. After that, we copy the\nsource code to the container. Then we build the react app. The second stage is\nthe production stage. We use the nginx image as a base image. Then we copy the\nbuild folder from the builder stage to the container. Then we remove the default\nnginx configuration. Then we copy our custom nginx configuration to the container.\nThen we expose the port 80. Finally, we run the nginx server."))}s.isMDXComponent=!0}}]);