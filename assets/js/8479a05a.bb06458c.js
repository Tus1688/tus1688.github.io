"use strict";(self.webpackChunktus_1688_github_io=self.webpackChunktus_1688_github_io||[]).push([[198],{1304:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"Project/Internal CRM/index","title":"Internal CRM","description":"Internal CRM is my first professional web app that I created for a steel","source":"@site/docs/Project/Internal CRM/index.md","sourceDirName":"Project/Internal CRM","slug":"/Project/Internal CRM/","permalink":"/docs/Project/Internal CRM/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Openmerce","permalink":"/docs/Project/Openmerce/"},"next":{"title":"React Nginx Config","permalink":"/docs/Web Development Notes/React Nginx Config"}}');var r=t(4848),s=t(8453);const o={sidebar_position:4},a="Internal CRM",l={},c=[{value:"Analysis phase",id:"analysis-phase",level:2},{value:"Reason for choosing those tech stack",id:"reason-for-choosing-those-tech-stack",level:2},{value:"What I learned",id:"what-i-learned",level:2},{value:"What I would do differently",id:"what-i-would-do-differently",level:2}];function d(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,s.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"internal-crm",children:"Internal CRM"})}),"\n",(0,r.jsxs)(n.p,{children:["Internal CRM is my first professional web app that I created for a steel\ndistributor company, built using React as the frontend and Go with chi as the\nbackend. This project not only helped me understand the low-level workings\nof HTTP and REST APIs, but it was also the first time I discovered the\n",(0,r.jsx)(n.strong,{children:'"hybrid stateless authentication"'})," that I made into a research article in 2025."]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsx)(n.p,{children:"This project is not open source to maintain trade secrets and reduce the attack surface."})}),"\n",(0,r.jsx)(n.h2,{id:"analysis-phase",children:"Analysis phase"}),"\n",(0,r.jsx)(n.p,{children:"It's important to note that the previous project I worked on differs\nsignificantly in complexity and requirements from this current project.\nTo better understand the unique challenges of this project, I've initiated\na series of quick interviews with lower management personnel who are\ncurrently using the company's old notebook system for distributing and\nmanaging quotations. These interviews are designed to uncover the specific\npain points, sources of demotivation, and factors that drive motivation,\nwhich will help us tailor our approach to this project. Finally, after making\nthe list of the features and flow, I began to consult with upper management to\nensure the created flow still aligns with the company's chain of control."}),"\n",(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:"Features"}),(0,r.jsx)("p",{children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["User authentication","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Highly performant verification yet fast to revoke"}),"\n",(0,r.jsx)(n.li,{children:"TOTP for 2FA"}),"\n",(0,r.jsx)(n.li,{children:"Session revoke"}),"\n",(0,r.jsx)(n.li,{children:"Authentication log"}),"\n",(0,r.jsx)(n.li,{children:"Account creation and modification log"}),"\n",(0,r.jsx)(n.li,{children:"Multiple role (RBAC)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Product","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Unit creation, deletion, and modification log"}),"\n",(0,r.jsx)(n.li,{children:"Name creation, deletion, and modification log"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Customer","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Customer data creation, deletion, and modification log"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Entity","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Separate numbering"}),"\n",(0,r.jsx)(n.li,{children:"Entity data creation, deletion, and modification log"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Quotation","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Draft"}),"\n",(0,r.jsx)(n.li,{children:"Metadata and item creation, deletion, and modification log"}),"\n",(0,r.jsx)(n.li,{children:"Pdf download"}),"\n",(0,r.jsx)(n.li,{children:'Common note "intellisense"'}),"\n",(0,r.jsx)(n.li,{children:"Built-in calculator"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Analytics","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Get the product's last price"}),"\n",(0,r.jsx)(n.li,{children:"Get the most active product by quantity"}),"\n",(0,r.jsx)(n.li,{children:"Get the highest value product by the amount of money"}),"\n",(0,r.jsx)(n.li,{children:"Get past the 2-week quotation stage"}),"\n",(0,r.jsx)(n.li,{children:"Get the biggest customer by the number of quotations"}),"\n",(0,r.jsx)(n.li,{children:"Get the biggest customer by the amount of money"}),"\n",(0,r.jsx)(n.li,{children:"Get the customer's previously requested item"}),"\n",(0,r.jsx)(n.li,{children:"Get the total quotation based on the amount of money"}),"\n"]}),"\n"]}),"\n"]})})]}),"\n",(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:"Technical Features"}),(0,r.jsx)("p",{children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Our Infrastructure","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Docker Swarm as the orchestrator"}),"\n",(0,r.jsx)(n.li,{children:"Traefik as the reverse proxy and certificate manager"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Database","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"PostgreSQL as the database"}),"\n",(0,r.jsx)(n.li,{children:"Redis as the cache"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Backend","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Go with Chi, as Chi doesn't have any third-party dependencies, and it accepts the default (pure Go) http handler, which makes it easier for me to switch to another router"}),"\n",(0,r.jsx)(n.li,{children:"We use raw SQL over ORM binding to get granular control over the database and to support the complex JOIN without hurting the performance"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Frontend","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"React, because I have had a bad experience with SvelteKit about routing, UI library, and state management"}),"\n",(0,r.jsx)(n.li,{children:"To ensure that client-side rendering does not hurt the performance, I have made sure to implement code splitting and caching through Nginx config"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["Authentication","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"I chose JWT for the authentication and authorization"}),"\n",(0,r.jsx)(n.li,{children:"For this project, instead of relying on expiration, I rely on the issued at timestamp to determine token expiration by adding the issued at timestamp to the duration, and checking whether the value is still less than the current time"}),"\n",(0,r.jsx)(n.li,{children:'By using issued at, I can set different expiration durations for different kinds of "sensitivity", e.g., 5 minutes for auth-related stuff, 30 minutes for customer-related stuff.'}),"\n",(0,r.jsx)(n.li,{children:"The access token and refresh token were save as httpOnly Cookie with sameSite=strict to prevent XSS and CSRF"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["CI/CD","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"I still choose Github Actions to build and push the image to the registry as it is relatively cheaper than using Azure registry (for the current usage)"}),"\n",(0,r.jsx)(n.li,{children:"Currrent deployment process doesn't have any downtime as every service already have healthcheck and replicated more than one"}),"\n"]}),"\n"]}),"\n"]})})]}),"\n",(0,r.jsx)(n.h2,{id:"reason-for-choosing-those-tech-stack",children:"Reason for choosing those tech stack"}),"\n",(0,r.jsxs)(n.p,{children:["Initially, my primary focus was on security. However, given that this is an\nenterprise application, I need to ensure that all the technologies I choose will\nremain supported over the next decade. If any become deprecated, I should be\nable to quickly select and transition to another library or programming language.\nWith that in mind, I've decided to go with classic React alongside ",(0,r.jsx)(n.code,{children:"react-router-dom"}),"\nand use Go with Chi."]}),"\n",(0,r.jsx)(n.h2,{id:"what-i-learned",children:"What I learned"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Real-life blue-green deployment"}),"\n",(0,r.jsx)(n.li,{children:"A hybrid expiration time for the access token gives me more flexibility and security"}),"\n",(0,r.jsx)(n.li,{children:'A lot of PL/pgSQL for database logging and maintaining the "ACID"-ity'}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"what-i-would-do-differently",children:"What I would do differently"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"I feel like my code is scattered, even though I still group them based on their\nfunctionality, so it would be a great idea to use dependency injection"}),"\n",(0,r.jsx)(n.li,{children:"The JWT becomes very huge because there are many claims inside it, so it might\nbe a good idea to use any token that is able to receive a custom payload or even\na binary payload (like protocol buffers or message pack)"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var i=t(6540);const r={},s=i.createContext(r);function o(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);