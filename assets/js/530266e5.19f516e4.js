"use strict";(self.webpackChunktus_1688_github_io=self.webpackChunktus_1688_github_io||[]).push([[591],{591:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>l,toc:()=>c});var t=i(4848),o=i(8453);const s={sidebar_position:1,description:"How to deploy a react app with nginx",tags:["react","nginx","web development"]},r=void 0,l={id:"Web Development/React Nginx Config",title:"React Nginx Config",description:"How to deploy a react app with nginx",source:"@site/docs/Web Development/React Nginx Config.md",sourceDirName:"Web Development",slug:"/Web Development/React Nginx Config",permalink:"/docs/Web Development/React Nginx Config",draft:!1,unlisted:!1,tags:[{label:"react",permalink:"/docs/tags/react"},{label:"nginx",permalink:"/docs/tags/nginx"},{label:"web development",permalink:"/docs/tags/web-development"}],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,description:"How to deploy a react app with nginx",tags:["react","nginx","web development"]},sidebar:"tutorialSidebar",previous:{title:"Openmerce",permalink:"/docs/Project/Openmerce/"},next:{title:"Dockerize React with Nginx",permalink:"/docs/Web Development/Dockerize React with Nginx"}},a={},c=[{value:"Why we use nginx on react?",id:"why-we-use-nginx-on-react",level:3},{value:"Who uses nginx?",id:"who-uses-nginx",level:3},{value:"How to deploy a react app with nginx?",id:"how-to-deploy-a-react-app-with-nginx",level:3},{value:"Nginx Config",id:"nginx-config",level:3},{value:"Explanation",id:"explanation",level:3},{value:"Conclusion",id:"conclusion",level:3}];function d(e){const n={admonition:"admonition",code:"code",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"There are many ways to deploy a react app. I always look for the simplest way and\nthe most secure way without compromising performance.\nSo I will show you how to deploy a react app with nginx."}),"\n",(0,t.jsx)(n.admonition,{title:"Important Note",type:"danger",children:(0,t.jsx)(n.p,{children:"Secure is a relative term. It is secure for me, but it might not be secure for you.\nSo please do your own research before deploying your react app in production."})}),"\n",(0,t.jsx)(n.h3,{id:"why-we-use-nginx-on-react",children:"Why we use nginx on react?"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Nginx is very fast"}),"\n",(0,t.jsx)(n.li,{children:"Nginx is very secure"}),"\n",(0,t.jsx)(n.li,{children:"Nginx is very stable"}),"\n",(0,t.jsx)(n.li,{children:"Nginx can handle a high volume of connections"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"who-uses-nginx",children:"Who uses nginx?"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Netflix"}),"\n",(0,t.jsx)(n.li,{children:"Airbnb"}),"\n",(0,t.jsx)(n.li,{children:"Cloudflare"}),"\n",(0,t.jsx)(n.li,{children:"Github"}),"\n",(0,t.jsx)(n.li,{children:"Heroku"}),"\n",(0,t.jsx)(n.li,{children:"And many more..."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"how-to-deploy-a-react-app-with-nginx",children:"How to deploy a react app with nginx?"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["First, you need to build your react app. You can do this by running ",(0,t.jsx)(n.code,{children:"npm run build"})," or ",(0,t.jsx)(n.code,{children:"yarn build"})," in your terminal."]}),"\n",(0,t.jsx)(n.li,{children:"Then, you need to copy the build folder to your nginx server."}),"\n",(0,t.jsxs)(n.li,{children:["Then, you need to create a new file in your nginx server. You can do this by running ",(0,t.jsx)(n.code,{children:"sudo vi /etc/nginx/sites-available/default"})," in your terminal."]}),"\n",(0,t.jsx)(n.li,{children:"Then, you need to paste the nginx config below in your nginx server."}),"\n",(0,t.jsxs)(n.li,{children:["Then, you need to restart your nginx server. You can do this by running ",(0,t.jsx)(n.code,{children:"sudo systemctl restart nginx"})," in your terminal."]}),"\n",(0,t.jsx)(n.li,{children:"Voila! You have deployed your react app with nginx."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"nginx-config",children:"Nginx Config"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'server {\n  listen 80;\n  location /static/settings.json {\n    root   /usr/share/nginx/html;\n    expires -1;\n    add_header Cache-Control "no-store, no-cache, must-revalidate";\n  }\n\n  location /static {\n    root   /usr/share/nginx/html;\n    expires modified 1y;\n    add_header Cache-Control "public";\n    access_log off;\n   }\n\n  location / {\n    root   /usr/share/nginx/html;\n    index  index.html index.htm;\n    try_files $uri $uri/ /index.html;\n  }\n  server_tokens off;\n  add_header X-Frame-Options "SAMEORIGIN";\n  add_header X-Content-Type-Options nosniff;\n  gzip on;\n  gzip_disable "msie6";\n\n  gzip_vary on;\n  gzip_proxied any;\n  gzip_comp_level 6;\n  gzip_buffers 16 8k;\n  gzip_http_version 1.1;\n  gzip_min_length 0;\n  gzip_types text/plain application/javascript text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript application/vnd.ms-fontobject application/x-font-ttf font/opentype;\n\n  error_page 500 502 503 504 /50x.html;\n  location = /50x.html {\n    root  /usr/share/nginx/html;\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"explanation",children:"Explanation"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"server {"})," - This is the start of the server block."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"listen 80;"})," - This is the port that nginx will listen to."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"location /static/settings.json {"})," - This is the location of the settings.json file."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"expires -1;"})," - This is the expiration time of the settings.json file. Which means it always expires."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"location / {"})," - This is the location of the react app."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"try_files $uri $uri/ /index.html;"})," - This is to redirect all the requests to the index.html file. Because react is a single page application, and we don't want to get 404 errors."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:'add_header Cache-Control "no-store, no-cache, must-revalidate";'})," - This is the cache control of the settings.json file."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"server_tokens off;"})," - This is to hide the nginx version."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:'add_header X-Frame-Options "SAMEORIGIN";'})," - This is to prevent clickjacking."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"add_header X-Content-Type-Options nosniff;"})," - This is to prevent MIME sniffing."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"gzip on;"})," - This is to enable gzip compression."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:'gzip_disable "msie6";'})," - This is to disable gzip compression for IE6."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"gzip_vary on;"})," - This is to enable gzip compression for all browsers."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"gzip_proxied any;"})," - This is to enable gzip compression for all proxies."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"gzip_comp_level 6;"})," - This is to set the gzip compression level. The higher the level, the more CPU time is needed to compress the data."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"gzip_buffers 16 8k;"})," - This is to set the number and size of the buffers used for reading and writing compressed data."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"gzip_http_version 1.1;"})," - This is to set the minimum HTTP version that supports gzip compression."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"gzip_min_length 0;"})," - This is to set the minimum length of the response that supports gzip compression."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"gzip_types text/plain application/javascript text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript application/vnd.ms-fontobject application/x-font-ttf font/opentype;"})," - This is to set the MIME types that supports gzip compression."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"conclusion",children:"Conclusion"}),"\n",(0,t.jsx)(n.p,{children:"I hope you enjoyed this tutorial. We learned how to customize nginx to deploy a react app.\nIt would be more easier to deploy a react app with nginx + docker. So, see you in the next tutorial!"})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>l});var t=i(6540);const o={},s=t.createContext(o);function r(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);