"use strict";(self.webpackChunktus_1688_github_io=self.webpackChunktus_1688_github_io||[]).push([[459],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>k});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=o.createContext({}),c=function(e){var t=o.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=c(e.components);return o.createElement(p.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,p=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),u=c(n),m=r,k=u["".concat(p,".").concat(m)]||u[m]||d[m]||a;return n?o.createElement(k,i(i({ref:t},s),{},{components:n})):o.createElement(k,i({ref:t},s))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=m;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[u]="string"==typeof e?e:r,i[1]=l;for(var c=2;c<a;c++)i[c]=n[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},7905:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var o=n(7462),r=(n(7294),n(3905));const a={sidebar_position:4,description:"How to automate the deployment of a SvelteKit with Docker",tags:["svelte","web development","docker"]},i=void 0,l={unversionedId:"Web Development/Dockerize SvelteKit",id:"Web Development/Dockerize SvelteKit",title:"Dockerize SvelteKit",description:"How to automate the deployment of a SvelteKit with Docker",source:"@site/docs/Web Development/Dockerize SvelteKit.md",sourceDirName:"Web Development",slug:"/Web Development/Dockerize SvelteKit",permalink:"/docs/Web Development/Dockerize SvelteKit",draft:!1,tags:[{label:"svelte",permalink:"/docs/tags/svelte"},{label:"web development",permalink:"/docs/tags/web-development"},{label:"docker",permalink:"/docs/tags/docker"}],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4,description:"How to automate the deployment of a SvelteKit with Docker",tags:["svelte","web development","docker"]},sidebar:"tutorialSidebar",previous:{title:"Dockerize Go REST API",permalink:"/docs/Web Development/Dockerize Go REST API"}},p={},c=[{value:"Why we use Docker on SvelteKit?",id:"why-we-use-docker-on-sveltekit",level:3},{value:"Dockerfile",id:"dockerfile",level:3},{value:"Explanation",id:"explanation",level:3}],s={toc:c},u="wrapper";function d(e){let{components:t,...n}=e;return(0,r.kt)(u,(0,o.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"I couldn't lie that sveltekit is awesome framework for building web app. But,\nI believe there is no official documentation about how to deploy sveltekit app\nwith docker. So I will show you how to automate the deployment of a SvelteKit\napp with Docker."),(0,r.kt)("admonition",{title:"Important Note",type:"danger"},(0,r.kt)("p",{parentName:"admonition"},"Docker run as root by default. So you need to be careful when using Docker.")),(0,r.kt)("h3",{id:"why-we-use-docker-on-sveltekit"},"Why we use Docker on SvelteKit?"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"With Docker, you can run your app anywhere where Docker is installed"),(0,r.kt)("li",{parentName:"ul"},"Docker is the most popular containerization tool"),(0,r.kt)("li",{parentName:"ul"},"It is easy to use and distribute"),(0,r.kt)("li",{parentName:"ul"},"Make your app easy to scale")),(0,r.kt)("h3",{id:"dockerfile"},"Dockerfile"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'FROM node:lts AS build\n\nWORKDIR /app\nCOPY package*.json .\nRUN npm install\nCOPY . .\nRUN npm run build\nRUN npm ci --omit=dev\n\nFROM node:lts-alpine\n# uncomment the line below if you need to make request to the outside world\n# RUN apk update && apk add ca-certificates && rm -rf /var/cache/apk/*\nWORKDIR /app\nCOPY --from=build /app/build ./build\nCOPY --from=build /app/package.json ./\nCOPY --from=build /app/node_modules ./node_modules\n\nEXPOSE 3000\nCMD ["node", "build"]\n')),(0,r.kt)("h3",{id:"explanation"},"Explanation"),(0,r.kt)("p",null,"So we use two stages in our Dockerfile. The first stage is the builder stage.\nWe use the node image as a base image. Then we copy the package.json and\npackage-lock.json file to the container. Then we install the dependencies.\nAfter that, we copy the source code to the container. Then we build the\nsveltekit app. Not to forget, we must run ",(0,r.kt)("inlineCode",{parentName:"p"},"npm ci --omit=dev")," to only install\nproduction dependencies. The second stage is the production stage. We use the\nnode image as a base image. Then we copy the build folder from the builder\nstage to the container. Then we copy the package.json and node_modules folder\nfrom the builder stage to the container. Then we expose the port 3000. Finally,\nwe run the sveltekit server. I use ",(0,r.kt)("inlineCode",{parentName:"p"},"node build")," because I use\nadapter-node. If you use adapter-static, there is no need to run ",(0,r.kt)("inlineCode",{parentName:"p"},"node build"),"\nand maybe even better to use nginx as a production base image."))}d.isMDXComponent=!0}}]);