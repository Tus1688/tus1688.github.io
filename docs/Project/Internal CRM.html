<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Project/Internal CRM/index" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Internal CRM | Tus1688</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://tus1688.github.io/docs/Project/Internal CRM"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Internal CRM | Tus1688"><meta data-rh="true" name="description" content="Internal CRM is my first professional web app that I created for a steel"><meta data-rh="true" property="og:description" content="Internal CRM is my first professional web app that I created for a steel"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://tus1688.github.io/docs/Project/Internal CRM"><link data-rh="true" rel="alternate" href="https://tus1688.github.io/docs/Project/Internal CRM" hreflang="en"><link data-rh="true" rel="alternate" href="https://tus1688.github.io/docs/Project/Internal CRM" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Internal CRM","item":"https://tus1688.github.io/docs/Project/Internal CRM/"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Tus1688 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Tus1688 Atom Feed"><link rel="stylesheet" href="/assets/css/styles.b68b18d7.css">
<script src="/assets/js/runtime~main.983a4f64.js" defer="defer"></script>
<script src="/assets/js/main.e5c2458b.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="dark";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.webp" alt="Tus1688 Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.webp" alt="Tus1688 Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Tus1688</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">My works</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://www.linkedin.com/in/benedictus-mario-24965a222/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-linkedin-link" aria-label="LinkedIn profile"></a><a href="https://github.com/tus1688" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/Project/Mini ERP">Project</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Project/Mini ERP">Mini ERP</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Project/Kali Docker on VNC">Kali Docker on VNC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/Project/Openmerce">Openmerce</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/Project/Internal CRM">Internal CRM</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/Web Development Notes/React Nginx Config">Web Development Notes</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Project</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Internal CRM</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Internal CRM</h1></header>
<p>Internal CRM is my first professional web app that I created for a steel
distributor company, built using React as the frontend and Go with chi as the
backend. This project not only helped me understand the low-level workings
of HTTP and REST APIs, but it was also the first time I discovered the
<strong>&quot;hybrid stateless authentication&quot;</strong> that I made into a research article in 2025.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>This project is not open source to maintain trade secrets and reduce the attack surface.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="analysis-phase">Analysis phase<a href="#analysis-phase" class="hash-link" aria-label="Direct link to Analysis phase" title="Direct link to Analysis phase">​</a></h2>
<p>It&#x27;s important to note that the previous project I worked on differs
significantly in complexity and requirements from this current project.
To better understand the unique challenges of this project, I&#x27;ve initiated
a series of quick interviews with lower management personnel who are
currently using the company&#x27;s old notebook system for distributing and
managing quotations. These interviews are designed to uncover the specific
pain points, sources of demotivation, and factors that drive motivation,
which will help us tailor our approach to this project. Finally, after making
the list of the features and flow, I began to consult with upper management to
ensure the created flow still aligns with the company&#x27;s chain of control.</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Features</summary><div><div class="collapsibleContent_i85q"><p></p><ul>
<li>User authentication<!-- -->
<ul>
<li>Highly performant verification yet fast to revoke</li>
<li>TOTP for 2FA</li>
<li>Session revoke</li>
<li>Authentication log</li>
<li>Account creation and modification log</li>
<li>Multiple role (RBAC)</li>
</ul>
</li>
<li>Product<!-- -->
<ul>
<li>Unit creation, deletion, and modification log</li>
<li>Name creation, deletion, and modification log</li>
</ul>
</li>
<li>Customer<!-- -->
<ul>
<li>Customer data creation, deletion, and modification log</li>
</ul>
</li>
<li>Entity<!-- -->
<ul>
<li>Separate numbering</li>
<li>Entity data creation, deletion, and modification log</li>
</ul>
</li>
<li>Quotation<!-- -->
<ul>
<li>Draft</li>
<li>Metadata and item creation, deletion, and modification log</li>
<li>Pdf download</li>
<li>Common note &quot;intellisense&quot;</li>
<li>Built-in calculator</li>
</ul>
</li>
<li>Analytics<!-- -->
<ul>
<li>Get the product&#x27;s last price</li>
<li>Get the most active product by quantity</li>
<li>Get the highest value product by the amount of money</li>
<li>Get past the 2-week quotation stage</li>
<li>Get the biggest customer by the number of quotations</li>
<li>Get the biggest customer by the amount of money</li>
<li>Get the customer&#x27;s previously requested item</li>
<li>Get the total quotation based on the amount of money</li>
</ul>
</li>
</ul><p></p></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>Technical Features</summary><div><div class="collapsibleContent_i85q"><p></p><ul>
<li>Our Infrastructure<!-- -->
<ul>
<li>Docker Swarm as the orchestrator</li>
<li>Traefik as the reverse proxy and certificate manager</li>
</ul>
</li>
<li>Database<!-- -->
<ul>
<li>PostgreSQL as the database</li>
<li>Redis as the cache</li>
</ul>
</li>
<li>Backend<!-- -->
<ul>
<li>Go with Chi, as Chi doesn&#x27;t have any third-party dependencies, and it accepts the default (pure Go) http handler, which makes it easier for me to switch to another router</li>
<li>We use raw SQL over ORM binding to get granular control over the database and to support the complex JOIN without hurting the performance</li>
</ul>
</li>
<li>Frontend<!-- -->
<ul>
<li>React, because I have had a bad experience with SvelteKit about routing, UI library, and state management</li>
<li>To ensure that client-side rendering does not hurt the performance, I have made sure to implement code splitting and caching through Nginx config</li>
</ul>
</li>
<li>Authentication<!-- -->
<ul>
<li>I chose JWT for the authentication and authorization</li>
<li>For this project, instead of relying on expiration, I rely on the issued at timestamp to determine token expiration by adding the issued at timestamp to the duration, and checking whether the value is still less than the current time</li>
<li>By using issued at, I can set different expiration durations for different kinds of &quot;sensitivity&quot;, e.g., 5 minutes for auth-related stuff, 30 minutes for customer-related stuff.</li>
<li>The access token and refresh token were save as httpOnly Cookie with sameSite=strict to prevent XSS and CSRF</li>
</ul>
</li>
<li>CI/CD<!-- -->
<ul>
<li>I still choose Github Actions to build and push the image to the registry as it is relatively cheaper than using Azure registry (for the current usage)</li>
<li>Currrent deployment process doesn&#x27;t have any downtime as every service already have healthcheck and replicated more than one</li>
</ul>
</li>
</ul><p></p></div></div></details>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="reason-for-choosing-those-tech-stack">Reason for choosing those tech stack<a href="#reason-for-choosing-those-tech-stack" class="hash-link" aria-label="Direct link to Reason for choosing those tech stack" title="Direct link to Reason for choosing those tech stack">​</a></h2>
<p>Initially, my primary focus was on security. However, given that this is an
enterprise application, I need to ensure that all the technologies I choose will
remain supported over the next decade. If any become deprecated, I should be
able to quickly select and transition to another library or programming language.
With that in mind, I&#x27;ve decided to go with classic React alongside <code>react-router-dom</code>
and use Go with Chi.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-i-learned">What I learned<a href="#what-i-learned" class="hash-link" aria-label="Direct link to What I learned" title="Direct link to What I learned">​</a></h2>
<ul>
<li>Real-life blue-green deployment</li>
<li>A hybrid expiration time for the access token gives me more flexibility and security</li>
<li>A lot of PL/pgSQL for database logging and maintaining the &quot;ACID&quot;-ity</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-i-would-do-differently">What I would do differently<a href="#what-i-would-do-differently" class="hash-link" aria-label="Direct link to What I would do differently" title="Direct link to What I would do differently">​</a></h2>
<ul>
<li>I feel like my code is scattered, even though I still group them based on their
functionality, so it would be a great idea to use dependency injection</li>
<li>The JWT becomes very huge because there are many claims inside it, so it might
be a good idea to use any token that is able to receive a custom payload or even
a binary payload (like protocol buffers or message pack)</li>
</ul></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Project/Openmerce"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Openmerce</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Web Development Notes/React Nginx Config"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">React Nginx Config</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#analysis-phase" class="table-of-contents__link toc-highlight">Analysis phase</a></li><li><a href="#reason-for-choosing-those-tech-stack" class="table-of-contents__link toc-highlight">Reason for choosing those tech stack</a></li><li><a href="#what-i-learned" class="table-of-contents__link toc-highlight">What I learned</a></li><li><a href="#what-i-would-do-differently" class="table-of-contents__link toc-highlight">What I would do differently</a></li></ul></div></div></div></div></main></div></div></div></div>
</body>
</html>